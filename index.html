<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador de Reportes - Marketing View</title>
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #FFA947 0%, #FF8C1A 50%, #FF9933 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 { color: #333; margin-bottom: 30px; text-align: center; }
    
    .company-selector {
      margin: 30px 0; padding: 30px;
      background: #f5f7fa; border-radius: 12px;
      text-align: center;
    }
    
    .dropdown-container select {
      width: 100%; max-width: 400px;
      padding: 15px; font-size: 16px;
      border: 2px solid #ddd; border-radius: 8px;
    }
    
    .generate-button {
      background: #00BFFF; color: white;
      padding: 20px; border: none; border-radius: 12px;
      font-size: 20px; font-weight: bold;
      width: 100%; cursor: pointer; display: none;
      margin-top: 20px;
    }
    .generate-button.active { display: block; }

    .results { margin-top: 30px; display: none; }
    
    /* Estilo para simular el PDF */
    .report-content {
      background: white; padding: 40px;
      border: 1px solid #eee; border-radius: 10px;
      line-height: 1.8; color: #444;
      white-space: pre-wrap; font-size: 14px;
    }
    .report-title { color: #00BFFF; font-weight: bold; text-transform: uppercase; margin-top: 20px; display: block; }
    
    .chart-container { margin-bottom: 30px; background: white; padding: 15px; border-radius: 8px; border: 1px solid #eee; }
    .back-btn { background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Generador de Reportes - Marketing View</h1>
    
    <div class="company-selector" id="companySelector">
      <h2>Selecciona la Empresa</h2>
      <div class="dropdown-container">
        <select id="companyDropdown" onchange="selectCompany()">
          <option value="">-- Selecciona una empresa --</option>
          <option value="adiestra">üêæ Adiestra - Educaci√≥n Canina</option>
          <option value="dentalcrea">ü¶∑ DentalCrea - Cl√≠nica Dental</option>
        </select>
      </div>
    </div>
    
    <button class="generate-button" id="generateBtn" onclick="generateReport()">
      üöÄ Generar Reporte de Diciembre 2025
    </button>
    
    <div id="results" class="results">
      <button class="back-btn" onclick="location.reload()">‚Üê Nueva Selecci√≥n</button>
      <div id="reportOutput" class="report-content"></div>
      
      <div style="margin-top:40px;">
        <div class="chart-container" id="chart1"></div>
        <div class="chart-container" id="chart2"></div>
        <div class="chart-container" id="chart3"></div>
      </div>
    </div>
  </div>

  <script>
    const dataStore = {
      adiestra: {
        name: "Adiestra",
        current: {
          fb_f_oct: 2541, fb_f_nov: 2541, fb_f_dic: 2540,
          ig_f_oct: 1877, ig_f_nov: 1876, ig_f_dic: 1882,
          fb_v_nov: 31472, fb_v_dic: 979,
          ig_v_nov: 4836, ig_v_dic: 96,
          fb_r_nov: 23914, fb_r_dic: 533,
          ig_r_nov: 1150, ig_r_dic: 2036,
          fb_i_nov: 1594, fb_i_dic: 10,
          ig_i_nov: 99, ig_i_dic: 70
        },
        historical: {
          months: ['Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
          fb_inter: [111, 114, 113, 114, 1481, 1594, 10],
          fb_reach: [136, 112, 136, 131, 19476, 23914, 533],
          ig_reach: [961, 682, 1902, 1595, 1347, 1150, 2036],
          ig_impressions: [2578, 2669, 9097, 6877, 6401, 4836, 2243]
        }
      },
      dentalcrea: {
        name: "DentalCrea",
        current: {
          fb_f_prev: 180, fb_f_dic: 180,
          ig_f_prev: 1145, ig_f_dic: 1151,
          fb_v_nov: 338, fb_v_dic: 482,
          ig_v_nov: 11895, ig_v_dic: 11895,
          fb_r_nov: 45, fb_r_dic: 166,
          ig_r_nov: 781, ig_r_dic: 781,
          fb_i_nov: 5, fb_i_dic: 4,
          ig_i_nov: 54, ig_i_dic: 54
        },
        historical: {
          months: ['Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
          fb_reach: [91, 88, 87, 96, 68, 59, 45, 166],
          ig_reach: [1735, 1390, 1480, 5384, 3982, 1098, 781, 781],
          ig_impressions: [9539, 7568, 13109, 21077, 19805, 14616, 11895, 11895]
        }
      }
    };

    function selectCompany() {
      const val = document.getElementById('companyDropdown').value;
      document.getElementById('generateBtn').classList.toggle('active', val !== "");
    }

    function generateReport() {
      const companyKey = document.getElementById('companyDropdown').value;
      const data = dataStore[companyKey];
      document.getElementById('companySelector').style.display = 'none';
      document.getElementById('generateBtn').style.display = 'none';
      document.getElementById('results').style.display = 'block';

      if(companyKey === 'adiestra') {
        renderAdiestra(data);
      } else {
        renderDental(data);
      }
    }

    function renderAdiestra(d) {
      const text = `RESUMEN DICIEMBRE 2025

Durante diciembre de 2025, se observ√≥ un comportamiento de transici√≥n en las redes sociales de Adiestra. Facebook experiment√≥ una disminuci√≥n significativa en todas las m√©tricas tras el pico excepcional de noviembre, regresando a niveles m√°s cercanos a los primeros meses del a√±o. Instagram mostr√≥ una recuperaci√≥n importante en alcance y mantuvo m√©tricas estables.

SEGUIDORES REDES SOCIALES
‚Ä¢ Facebook:
  - OCTUBRE: ${d.current.fb_f_oct}
  - NOVIEMBRE: ${d.current.fb_f_nov}
  - DICIEMBRE: ${d.current.fb_f_dic}
  - AUMENTO SEGUIDORES: 0
  - DEJARON DE SEGUIRTE: 1

‚Ä¢ Instagram:
  - OCTUBRE: ${d.current.ig_f_oct}
  - NOVIEMBRE: ${d.current.ig_f_nov}
  - DICIEMBRE: ${d.current.ig_f_dic}
  - AUMENTO SEGUIDORES: 6
  - DEJARON DE SEGUIRTE: 0

MEJORES POSTS
‚Ä¢ DICIEMBRE, Facebook:
  - Una buena convivencia en casa con tu peludo
  - üêæ A veces pueden poner a prueba tu paciencia...
  - ‚ú® La confianza no aparece de un d√≠a para otro...
‚Ä¢ DICIEMBRE, Instagram:
  - Mejor Post: 371 visualizaciones
  - Mejor Reel: 320 visualizaciones

VISUALIZACIONES
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_v_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.fb_v_dic.toLocaleString()}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_v_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.ig_v_dic.toLocaleString()}

CONCLUSIONES:
Facebook registr√≥ una disminuci√≥n dr√°stica descendiendo de las cifras excepcionales de noviembre. Este comportamiento es natural tras un pico viral y representa un retorno a niveles consistentes con el hist√≥rico. Instagram experiment√≥ una baja t√≠pica de fin de a√±o al reducirse la frecuencia de reels.

ALCANCE
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_r_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.fb_r_dic.toLocaleString()}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_r_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.ig_r_dic.toLocaleString()}

CONCLUSIONES:
Facebook retorn√≥ a sus patrones normales de distribuci√≥n. Instagram mostr√≥ una recuperaci√≥n notable, casi duplicando su alcance, demostrando que el contenido circul√≥ mejor dentro de la comunidad y lleg√≥ a audiencias nuevas.

INTERACCIONES
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_i_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.fb_i_dic.toLocaleString()}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_i_nov}
  - DICIEMBRE: ${d.current.ig_i_dic}

CONCLUSIONES:
Reflejan el retorno a la normalidad en Facebook. Instagram mantiene niveles saludables de participaci√≥n con una audiencia comprometida.

CONCLUSIONES FINALES
El mes de diciembre represent√≥ una normalizaci√≥n tras el pico extraordinario de noviembre. Facebook retorn√≥ a sus niveles base de rendimiento, aline√°ndose con el hist√≥rico del primer trimestre. Instagram mostr√≥ resiliencia, recuperando alcance y manteniendo estabilidad en visitas al perfil.`;

      formatAndShow(text);
      
      const h = d.historical;
      Plotly.newPlot('chart1', [{ x: h.months, y: h.fb_inter, type: 'bar', name: 'Interacciones FB', marker: {color: '#9b59b6'} }], {title: 'INTERACCIONES FACEBOOK'});
      Plotly.newPlot('chart2', [{ x: h.months, y: h.ig_reach, type: 'bar', name: 'Alcance IG', marker: {color: '#3498db'} }], {title: 'ALCANCE INSTAGRAM'});
      Plotly.newPlot('chart3', [{ x: h.months, y: h.ig_impressions, type: 'bar', name: 'Impresiones IG', marker: {color: '#e74c3c'} }], {title: 'IMPRESIONES INSTAGRAM'});
    }

    function renderDental(d) {
      const text = `RESUMEN DICIEMBRE 2025

Durante diciembre de 2025, se observ√≥ un comportamiento de estabilizaci√≥n en DentalCrea. Facebook mostr√≥ mejoras notables en visualizaciones tras la ca√≠da de noviembre, mientras Instagram mantuvo m√©tricas estables consolidando la comunidad.

SEGUIDORES REDES SOCIALES
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_f_prev}
  - DICIEMBRE: ${d.current.fb_f_dic}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_f_prev}
  - DICIEMBRE: ${d.current.ig_f_dic}
  - AUMENTO SEGUIDORES: 6

VISUALIZACIONES
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_v_nov}
  - DICIEMBRE: ${d.current.fb_v_dic}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_v_nov.toLocaleString()}
  - DICIEMBRE: ${d.current.ig_v_dic.toLocaleString()}

CONCLUSIONES:
Facebook registr√≥ un aumento importante, recuperando tracci√≥n. Instagram se mantuvo s√≥lido, demostrando que el contenido visual especializado sigue reteniendo la atenci√≥n.

ALCANCE
‚Ä¢ Facebook:
  - NOVIEMBRE: ${d.current.fb_r_nov}
  - DICIEMBRE: ${d.current.fb_r_dic}
‚Ä¢ Instagram:
  - NOVIEMBRE: ${d.current.ig_r_nov}
  - DICIEMBRE: ${d.current.ig_r_dic}

CONCLUSIONES:
Facebook logr√≥ una recuperaci√≥n de m√°s del 200% en alcance respecto al mes anterior. Instagram se mantuvo estable, confirmando la efectividad de los reels educativos.

INTERACCIONES
‚Ä¢ Facebook:
  - DICIEMBRE: ${d.current.fb_i_nov}
‚Ä¢ Instagram:
  - DICIEMBRE: ${d.current.ig_i_nov}

CONCLUSIONES FINALES:
Diciembre cierra con una nota positiva en recuperaci√≥n de visibilidad org√°nica. Instagram se consolida como el pilar de la marca, mientras que Facebook empieza a mostrar se√±ales de mayor circulaci√≥n de contenido.`;

      formatAndShow(text);
      
      const h = d.historical;
      Plotly.newPlot('chart1', [{ x: h.months, y: h.fb_reach, type: 'bar', name: 'Alcance FB', marker: {color: '#2ecc71'} }], {title: 'ALCANCE FACEBOOK'});
      Plotly.newPlot('chart2', [{ x: h.months, y: h.ig_reach, type: 'bar', name: 'Alcance IG', marker: {color: '#3498db'} }], {title: 'ALCANCE INSTAGRAM'});
      Plotly.newPlot('chart3', [{ x: h.months, y: h.ig_impressions, type: 'bar', name: 'Impresiones IG', marker: {color: '#e67e22'} }], {title: 'IMPRESIONES INSTAGRAM'});
    }

    function formatAndShow(text) {
      // Reemplaza los t√≠tulos por SPANs con la clase azul
      const formatted = text.replace(/^[A-Z√Å√â√ç√ì√ö\s]{5,}$/gm, match => `<span class="report-title">${match}</span>`);
      document.getElementById('reportOutput').innerHTML = formatted;
    }
  </script>
</body>
</html>
